{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NOTES_FILENAME='notes.txt';function CloudNotes(_ref){let{isOpen,onClose}=_ref;const[content,setContent]=useState('');const[loading,setLoading]=useState(false);const[saving,setSaving]=useState(false);const[status,setStatus]=useState('');// Load notes from API\nconst loadNotes=useCallback(async()=>{setLoading(true);try{const response=await fetch('/api/files');if(response.ok){var _data$files;const data=await response.json();setContent(((_data$files=data.files)===null||_data$files===void 0?void 0:_data$files[NOTES_FILENAME])||'');}}catch(err){setStatus('Failed to load');}finally{setLoading(false);}},[]);// Save notes to API\nconst saveNotes=async()=>{setSaving(true);setStatus('Saving...');try{const response=await fetch('/api/files',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({filename:NOTES_FILENAME,content:content})});if(response.ok){setStatus('Saved ✓');}else{setStatus('Save failed');}}catch(err){setStatus('Save failed');}finally{setSaving(false);}};// Load notes when modal opens\nuseEffect(()=>{if(isOpen){loadNotes();setStatus('');}},[isOpen,loadNotes]);if(!isOpen)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"cloud-notes-overlay\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"cloud-notes-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cloud-notes-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u2601\\uFE0F Cloud Notes\"}),status&&/*#__PURE__*/_jsx(\"span\",{className:\"cloud-notes-status\",children:status}),/*#__PURE__*/_jsx(\"button\",{className:\"cloud-notes-close\",onClick:onClose,children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"textarea\",{className:\"cloud-notes-textarea\",value:content,onChange:e=>setContent(e.target.value),placeholder:\"Write notes here...\",disabled:loading}),/*#__PURE__*/_jsx(\"div\",{className:\"cloud-notes-footer\",children:/*#__PURE__*/_jsx(\"button\",{className:\"cloud-notes-save\",onClick:saveNotes,disabled:saving,children:\"Save\"})})]})});}export default CloudNotes;","map":{"version":3,"names":["React","useState","useEffect","useCallback","jsx","_jsx","jsxs","_jsxs","NOTES_FILENAME","CloudNotes","_ref","isOpen","onClose","content","setContent","loading","setLoading","saving","setSaving","status","setStatus","loadNotes","response","fetch","ok","_data$files","data","json","files","err","saveNotes","method","headers","body","JSON","stringify","filename","className","onClick","children","e","stopPropagation","value","onChange","target","placeholder","disabled"],"sources":["/Users/stanleytan/Documents/25-technical/01-github/vercel_textviewer/src/components/CloudNotes.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\n\nconst NOTES_FILENAME = 'notes.txt';\n\nfunction CloudNotes({ isOpen, onClose }) {\n  const [content, setContent] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [status, setStatus] = useState('');\n\n  // Load notes from API\n  const loadNotes = useCallback(async () => {\n    setLoading(true);\n    try {\n      const response = await fetch('/api/files');\n      if (response.ok) {\n        const data = await response.json();\n        setContent(data.files?.[NOTES_FILENAME] || '');\n      }\n    } catch (err) {\n      setStatus('Failed to load');\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Save notes to API\n  const saveNotes = async () => {\n    setSaving(true);\n    setStatus('Saving...');\n\n    try {\n      const response = await fetch('/api/files', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          filename: NOTES_FILENAME,\n          content: content\n        })\n      });\n\n      if (response.ok) {\n        setStatus('Saved ✓');\n      } else {\n        setStatus('Save failed');\n      }\n    } catch (err) {\n      setStatus('Save failed');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // Load notes when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      loadNotes();\n      setStatus('');\n    }\n  }, [isOpen, loadNotes]);\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"cloud-notes-overlay\" onClick={onClose}>\n      <div className=\"cloud-notes-modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"cloud-notes-header\">\n          <h3>☁️ Cloud Notes</h3>\n          {status && <span className=\"cloud-notes-status\">{status}</span>}\n          <button className=\"cloud-notes-close\" onClick={onClose}>×</button>\n        </div>\n\n        <textarea\n          className=\"cloud-notes-textarea\"\n          value={content}\n          onChange={(e) => setContent(e.target.value)}\n          placeholder=\"Write notes here...\"\n          disabled={loading}\n        />\n\n        <div className=\"cloud-notes-footer\">\n          <button\n            className=\"cloud-notes-save\"\n            onClick={saveNotes}\n            disabled={saving}\n          >\n            Save\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default CloudNotes;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}