{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NOTES_FILENAME='notes.txt';function CloudNotes(_ref){let{isOpen,onClose}=_ref;const[content,setContent]=useState('');const[accessCode,setAccessCode]=useState('');const[isUnlocked,setIsUnlocked]=useState(false);const[loading,setLoading]=useState(false);const[saving,setSaving]=useState(false);const[status,setStatus]=useState('');// Load notes from API\nconst loadNotes=useCallback(async()=>{setLoading(true);try{const response=await fetch('/api/files');if(response.ok){var _data$files;const data=await response.json();setContent(((_data$files=data.files)===null||_data$files===void 0?void 0:_data$files[NOTES_FILENAME])||'');}}catch(err){setStatus('Failed to load');}finally{setLoading(false);}},[]);// Save notes to API\nconst saveNotes=async()=>{if(!isUnlocked||!accessCode){setStatus('Unlock first');return;}setSaving(true);setStatus('Saving...');try{const response=await fetch('/api/files',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({filename:NOTES_FILENAME,content:content,accessCode:accessCode})});if(response.ok){setStatus('Saved ‚úì');}else{setStatus('Save failed');}}catch(err){setStatus('Save failed');}finally{setSaving(false);}};// Unlock with access code\nconst handleUnlock=async()=>{if(!accessCode)return;try{const response=await fetch('/api/auth',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({accessCode})});if(response.ok){setIsUnlocked(true);setStatus('Unlocked');}else{setStatus('Invalid code');}}catch(err){setStatus('Auth failed');}};// Load notes when modal opens\nuseEffect(()=>{if(isOpen){loadNotes();setStatus('');}},[isOpen,loadNotes]);if(!isOpen)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"cloud-notes-overlay\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"cloud-notes-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cloud-notes-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u2601\\uFE0F Cloud Notes\"}),status&&/*#__PURE__*/_jsx(\"span\",{className:\"cloud-notes-status\",children:status}),/*#__PURE__*/_jsx(\"button\",{className:\"cloud-notes-close\",onClick:onClose,children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cloud-notes-unlock\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Access code\",value:accessCode,onChange:e=>setAccessCode(e.target.value),onKeyDown:e=>e.key==='Enter'&&handleUnlock()}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUnlock,disabled:isUnlocked,children:isUnlocked?'üîì':'üîí'})]}),/*#__PURE__*/_jsx(\"textarea\",{className:\"cloud-notes-textarea\",value:content,onChange:e=>setContent(e.target.value),placeholder:isUnlocked?\"Write notes here...\":\"Unlock to edit\",disabled:!isUnlocked||loading}),/*#__PURE__*/_jsx(\"div\",{className:\"cloud-notes-footer\",children:/*#__PURE__*/_jsx(\"button\",{className:\"cloud-notes-save\",onClick:saveNotes,disabled:!isUnlocked||saving,children:\"Save\"})})]})});}export default CloudNotes;","map":{"version":3,"names":["React","useState","useEffect","useCallback","jsx","_jsx","jsxs","_jsxs","NOTES_FILENAME","CloudNotes","_ref","isOpen","onClose","content","setContent","accessCode","setAccessCode","isUnlocked","setIsUnlocked","loading","setLoading","saving","setSaving","status","setStatus","loadNotes","response","fetch","ok","_data$files","data","json","files","err","saveNotes","method","headers","body","JSON","stringify","filename","handleUnlock","className","onClick","children","e","stopPropagation","type","placeholder","value","onChange","target","onKeyDown","key","disabled"],"sources":["/Users/stanleytan/Documents/25-technical/01-github/vercel_textviewer/src/components/CloudNotes.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\n\nconst NOTES_FILENAME = 'notes.txt';\n\nfunction CloudNotes({ isOpen, onClose }) {\n  const [content, setContent] = useState('');\n  const [accessCode, setAccessCode] = useState('');\n  const [isUnlocked, setIsUnlocked] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [status, setStatus] = useState('');\n\n  // Load notes from API\n  const loadNotes = useCallback(async () => {\n    setLoading(true);\n    try {\n      const response = await fetch('/api/files');\n      if (response.ok) {\n        const data = await response.json();\n        setContent(data.files?.[NOTES_FILENAME] || '');\n      }\n    } catch (err) {\n      setStatus('Failed to load');\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Save notes to API\n  const saveNotes = async () => {\n    if (!isUnlocked || !accessCode) {\n      setStatus('Unlock first');\n      return;\n    }\n\n    setSaving(true);\n    setStatus('Saving...');\n\n    try {\n      const response = await fetch('/api/files', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          filename: NOTES_FILENAME,\n          content: content,\n          accessCode: accessCode\n        })\n      });\n\n      if (response.ok) {\n        setStatus('Saved ‚úì');\n      } else {\n        setStatus('Save failed');\n      }\n    } catch (err) {\n      setStatus('Save failed');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // Unlock with access code\n  const handleUnlock = async () => {\n    if (!accessCode) return;\n    try {\n      const response = await fetch('/api/auth', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ accessCode })\n      });\n      if (response.ok) {\n        setIsUnlocked(true);\n        setStatus('Unlocked');\n      } else {\n        setStatus('Invalid code');\n      }\n    } catch (err) {\n      setStatus('Auth failed');\n    }\n  };\n\n  // Load notes when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      loadNotes();\n      setStatus('');\n    }\n  }, [isOpen, loadNotes]);\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"cloud-notes-overlay\" onClick={onClose}>\n      <div className=\"cloud-notes-modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"cloud-notes-header\">\n          <h3>‚òÅÔ∏è Cloud Notes</h3>\n          {status && <span className=\"cloud-notes-status\">{status}</span>}\n          <button className=\"cloud-notes-close\" onClick={onClose}>√ó</button>\n        </div>\n\n        <div className=\"cloud-notes-unlock\">\n          <input\n            type=\"password\"\n            placeholder=\"Access code\"\n            value={accessCode}\n            onChange={(e) => setAccessCode(e.target.value)}\n            onKeyDown={(e) => e.key === 'Enter' && handleUnlock()}\n          />\n          <button onClick={handleUnlock} disabled={isUnlocked}>\n            {isUnlocked ? 'üîì' : 'üîí'}\n          </button>\n        </div>\n\n        <textarea\n          className=\"cloud-notes-textarea\"\n          value={content}\n          onChange={(e) => setContent(e.target.value)}\n          placeholder={isUnlocked ? \"Write notes here...\" : \"Unlock to edit\"}\n          disabled={!isUnlocked || loading}\n        />\n\n        <div className=\"cloud-notes-footer\">\n          <button\n            className=\"cloud-notes-save\"\n            onClick={saveNotes}\n            disabled={!isUnlocked || saving}\n          >\n            Save\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default CloudNotes;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}