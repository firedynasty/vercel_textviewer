{"ast":null,"code":"import React,{useRef}from'react';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";function ControlBar(_ref){let{currentFile,fontSize,onFontSizeChange,darkMode,onDarkModeToggle,isEditing,onEdit,onSave,onCancel,onFilesLoaded}=_ref;const folderInputRef=useRef(null);const handleDragOver=e=>{e.preventDefault();e.stopPropagation();e.currentTarget.classList.add('drag-over');};const handleDragLeave=e=>{e.preventDefault();e.stopPropagation();e.currentTarget.classList.remove('drag-over');};const handleDrop=e=>{e.preventDefault();e.stopPropagation();e.currentTarget.classList.remove('drag-over');const items=e.dataTransfer.items;if(items){const entries=[];for(let i=0;i<items.length;i++){const entry=items[i].webkitGetAsEntry();if(entry){entries.push(entry);}}if(entries.length>0){processEntries(entries);}}};const processEntries=async entries=>{const files=[];const readEntry=async function(entry){let path=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';if(entry.isFile){return new Promise(resolve=>{entry.file(file=>{// Create a new file with the relative path\nconst relativePath=path+file.name;Object.defineProperty(file,'webkitRelativePath',{value:relativePath,writable:false});files.push(file);resolve();});});}else if(entry.isDirectory){const dirReader=entry.createReader();return new Promise(resolve=>{const readEntries=()=>{dirReader.readEntries(async entries=>{if(entries.length===0){resolve();}else{for(const entry of entries){await readEntry(entry,path+entry.name+'/');}readEntries();}});};readEntries();});}};for(const entry of entries){await readEntry(entry,entry.name+'/');}if(files.length>0){onFilesLoaded(files);}};const handleFolderSelect=e=>{if(e.target.files&&e.target.files.length>0){onFilesLoaded(e.target.files);}};const canEdit=currentFile&&(currentFile.type==='text'||currentFile.type==='rtf'||currentFile.type==='markdown');return/*#__PURE__*/_jsxs(\"div\",{className:\"control-bar\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"drop-folder-btn\",onClick:()=>{var _folderInputRef$curre;return(_folderInputRef$curre=folderInputRef.current)===null||_folderInputRef$curre===void 0?void 0:_folderInputRef$curre.click();},onDragOver:handleDragOver,onDragLeave:handleDragLeave,onDrop:handleDrop,children:\"Drop Folder Here\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:folderInputRef,style:{display:'none'},webkitdirectory:\"\",directory:\"\",multiple:true,onChange:handleFolderSelect}),/*#__PURE__*/_jsx(\"div\",{className:\"edit-controls\",children:!isEditing?/*#__PURE__*/_jsx(\"button\",{className:\"edit-btn\",onClick:onEdit,disabled:!canEdit,children:\"Edit\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"save-btn\",onClick:onSave,children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{className:\"cancel-btn\",onClick:onCancel,children:\"Cancel\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"font-size-controls\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"font-size-btn\",onClick:()=>onFontSizeChange(-2),children:\"-\"}),/*#__PURE__*/_jsx(\"button\",{className:\"font-size-btn\",onClick:()=>onFontSizeChange(2),children:\"+\"}),/*#__PURE__*/_jsx(\"button\",{className:\"dark-mode-btn\",onClick:onDarkModeToggle,title:darkMode?'Light Mode':'Dark Mode',children:darkMode?'☀':'☾'})]}),currentFile&&currentFile.type!=='divider'&&/*#__PURE__*/_jsx(\"span\",{className:\"current-file-name\",children:currentFile.key})]});}export default ControlBar;","map":{"version":3,"names":["React","useRef","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ControlBar","_ref","currentFile","fontSize","onFontSizeChange","darkMode","onDarkModeToggle","isEditing","onEdit","onSave","onCancel","onFilesLoaded","folderInputRef","handleDragOver","e","preventDefault","stopPropagation","currentTarget","classList","add","handleDragLeave","remove","handleDrop","items","dataTransfer","entries","i","length","entry","webkitGetAsEntry","push","processEntries","files","readEntry","path","arguments","undefined","isFile","Promise","resolve","file","relativePath","name","Object","defineProperty","value","writable","isDirectory","dirReader","createReader","readEntries","handleFolderSelect","target","canEdit","type","className","children","onClick","_folderInputRef$curre","current","click","onDragOver","onDragLeave","onDrop","ref","style","display","webkitdirectory","directory","multiple","onChange","disabled","title","key"],"sources":["/Users/stanleytan/Documents/25-technical/01-github/vercel_textviewer/src/components/ControlBar.js"],"sourcesContent":["import React, { useRef } from 'react';\n\nfunction ControlBar({\n  currentFile,\n  fontSize,\n  onFontSizeChange,\n  darkMode,\n  onDarkModeToggle,\n  isEditing,\n  onEdit,\n  onSave,\n  onCancel,\n  onFilesLoaded\n}) {\n  const folderInputRef = useRef(null);\n\n  const handleDragOver = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    e.currentTarget.classList.add('drag-over');\n  };\n\n  const handleDragLeave = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    e.currentTarget.classList.remove('drag-over');\n  };\n\n  const handleDrop = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    e.currentTarget.classList.remove('drag-over');\n\n    const items = e.dataTransfer.items;\n    if (items) {\n      const entries = [];\n      for (let i = 0; i < items.length; i++) {\n        const entry = items[i].webkitGetAsEntry();\n        if (entry) {\n          entries.push(entry);\n        }\n      }\n      if (entries.length > 0) {\n        processEntries(entries);\n      }\n    }\n  };\n\n  const processEntries = async (entries) => {\n    const files = [];\n\n    const readEntry = async (entry, path = '') => {\n      if (entry.isFile) {\n        return new Promise((resolve) => {\n          entry.file((file) => {\n            // Create a new file with the relative path\n            const relativePath = path + file.name;\n            Object.defineProperty(file, 'webkitRelativePath', {\n              value: relativePath,\n              writable: false\n            });\n            files.push(file);\n            resolve();\n          });\n        });\n      } else if (entry.isDirectory) {\n        const dirReader = entry.createReader();\n        return new Promise((resolve) => {\n          const readEntries = () => {\n            dirReader.readEntries(async (entries) => {\n              if (entries.length === 0) {\n                resolve();\n              } else {\n                for (const entry of entries) {\n                  await readEntry(entry, path + entry.name + '/');\n                }\n                readEntries();\n              }\n            });\n          };\n          readEntries();\n        });\n      }\n    };\n\n    for (const entry of entries) {\n      await readEntry(entry, entry.name + '/');\n    }\n\n    if (files.length > 0) {\n      onFilesLoaded(files);\n    }\n  };\n\n  const handleFolderSelect = (e) => {\n    if (e.target.files && e.target.files.length > 0) {\n      onFilesLoaded(e.target.files);\n    }\n  };\n\n  const canEdit = currentFile && (currentFile.type === 'text' || currentFile.type === 'rtf' || currentFile.type === 'markdown');\n\n  return (\n    <div className=\"control-bar\">\n      <button\n        className=\"drop-folder-btn\"\n        onClick={() => folderInputRef.current?.click()}\n        onDragOver={handleDragOver}\n        onDragLeave={handleDragLeave}\n        onDrop={handleDrop}\n      >\n        Drop Folder Here\n      </button>\n\n      <input\n        type=\"file\"\n        ref={folderInputRef}\n        style={{ display: 'none' }}\n        webkitdirectory=\"\"\n        directory=\"\"\n        multiple\n        onChange={handleFolderSelect}\n      />\n\n      <div className=\"edit-controls\">\n        {!isEditing ? (\n          <button\n            className=\"edit-btn\"\n            onClick={onEdit}\n            disabled={!canEdit}\n          >\n            Edit\n          </button>\n        ) : (\n          <>\n            <button className=\"save-btn\" onClick={onSave}>Save</button>\n            <button className=\"cancel-btn\" onClick={onCancel}>Cancel</button>\n          </>\n        )}\n      </div>\n\n      <div className=\"font-size-controls\">\n        <button\n          className=\"font-size-btn\"\n          onClick={() => onFontSizeChange(-2)}\n        >\n          -\n        </button>\n        <button\n          className=\"font-size-btn\"\n          onClick={() => onFontSizeChange(2)}\n        >\n          +\n        </button>\n        <button\n          className=\"dark-mode-btn\"\n          onClick={onDarkModeToggle}\n          title={darkMode ? 'Light Mode' : 'Dark Mode'}\n        >\n          {darkMode ? '☀' : '☾'}\n        </button>\n      </div>\n\n      {currentFile && currentFile.type !== 'divider' && (\n        <span className=\"current-file-name\">{currentFile.key}</span>\n      )}\n    </div>\n  );\n}\n\nexport default ControlBar;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}