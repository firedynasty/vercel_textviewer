{"ast":null,"code":"import React,{useState,useCallback}from'react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const NOTES_FILENAME='notes.txt';function CloudNotes(_ref){let{isOpen,onClose}=_ref;const[content,setContent]=useState('');const[accessCode,setAccessCode]=useState('');const[isUnlocked,setIsUnlocked]=useState(false);const[loading,setLoading]=useState(false);const[saving,setSaving]=useState(false);const[status,setStatus]=useState('');// Unlock and load notes\nconst handleUnlock=async()=>{if(!accessCode){setStatus('Enter access code');return;}setLoading(true);setStatus('Verifying...');try{const response=await fetch('/api/files',{method:'GET',headers:{'x-access-code':accessCode}});if(response.ok){var _data$files;const data=await response.json();setContent(((_data$files=data.files)===null||_data$files===void 0?void 0:_data$files[NOTES_FILENAME])||'');setIsUnlocked(true);setStatus('');}else if(response.status===401){setStatus('Invalid access code');setIsUnlocked(false);}else{setStatus('Failed to load');}}catch(err){setStatus('Error: '+err.message);}finally{setLoading(false);}};// Save notes to API\nconst saveNotes=async()=>{if(!isUnlocked)return;setSaving(true);setStatus('Saving...');try{const response=await fetch('/api/files',{method:'POST',headers:{'Content-Type':'application/json','x-access-code':accessCode},body:JSON.stringify({filename:NOTES_FILENAME,content:content})});if(response.ok){setStatus('Saved ‚úì');}else{setStatus('Save failed');}}catch(err){setStatus('Save failed');}finally{setSaving(false);}};// Reset state when modal closes\nconst handleClose=useCallback(()=>{setIsUnlocked(false);setContent('');setAccessCode('');setStatus('');onClose();},[onClose]);if(!isOpen)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"cloud-notes-overlay\",onClick:handleClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"cloud-notes-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cloud-notes-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u2601\\uFE0F Cloud Notes\"}),status&&/*#__PURE__*/_jsx(\"span\",{className:\"cloud-notes-status\",children:status}),/*#__PURE__*/_jsx(\"button\",{className:\"cloud-notes-close\",onClick:handleClose,children:\"\\xD7\"})]}),!isUnlocked?/*#__PURE__*/_jsxs(\"div\",{className:\"cloud-notes-unlock\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Enter access code\",value:accessCode,onChange:e=>setAccessCode(e.target.value),onKeyDown:e=>e.key==='Enter'&&handleUnlock(),disabled:loading}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUnlock,disabled:loading,children:loading?'...':'üîì Unlock'})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"textarea\",{className:\"cloud-notes-textarea\",value:content,onChange:e=>setContent(e.target.value),placeholder:\"Write notes here...\"}),/*#__PURE__*/_jsx(\"div\",{className:\"cloud-notes-footer\",children:/*#__PURE__*/_jsx(\"button\",{className:\"cloud-notes-save\",onClick:saveNotes,disabled:saving,children:\"Save\"})})]})]})});}export default CloudNotes;","map":{"version":3,"names":["React","useState","useCallback","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","NOTES_FILENAME","CloudNotes","_ref","isOpen","onClose","content","setContent","accessCode","setAccessCode","isUnlocked","setIsUnlocked","loading","setLoading","saving","setSaving","status","setStatus","handleUnlock","response","fetch","method","headers","ok","_data$files","data","json","files","err","message","saveNotes","body","JSON","stringify","filename","handleClose","className","onClick","children","e","stopPropagation","type","placeholder","value","onChange","target","onKeyDown","key","disabled"],"sources":["/Users/stanleytan/Documents/25-technical/01-github/vercel_textviewer/src/components/CloudNotes.js"],"sourcesContent":["import React, { useState, useCallback } from 'react';\n\nconst NOTES_FILENAME = 'notes.txt';\n\nfunction CloudNotes({ isOpen, onClose }) {\n  const [content, setContent] = useState('');\n  const [accessCode, setAccessCode] = useState('');\n  const [isUnlocked, setIsUnlocked] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [status, setStatus] = useState('');\n\n  // Unlock and load notes\n  const handleUnlock = async () => {\n    if (!accessCode) {\n      setStatus('Enter access code');\n      return;\n    }\n\n    setLoading(true);\n    setStatus('Verifying...');\n\n    try {\n      const response = await fetch('/api/files', {\n        method: 'GET',\n        headers: {\n          'x-access-code': accessCode\n        }\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        setContent(data.files?.[NOTES_FILENAME] || '');\n        setIsUnlocked(true);\n        setStatus('');\n      } else if (response.status === 401) {\n        setStatus('Invalid access code');\n        setIsUnlocked(false);\n      } else {\n        setStatus('Failed to load');\n      }\n    } catch (err) {\n      setStatus('Error: ' + err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Save notes to API\n  const saveNotes = async () => {\n    if (!isUnlocked) return;\n\n    setSaving(true);\n    setStatus('Saving...');\n\n    try {\n      const response = await fetch('/api/files', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-access-code': accessCode\n        },\n        body: JSON.stringify({\n          filename: NOTES_FILENAME,\n          content: content\n        })\n      });\n\n      if (response.ok) {\n        setStatus('Saved ‚úì');\n      } else {\n        setStatus('Save failed');\n      }\n    } catch (err) {\n      setStatus('Save failed');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // Reset state when modal closes\n  const handleClose = useCallback(() => {\n    setIsUnlocked(false);\n    setContent('');\n    setAccessCode('');\n    setStatus('');\n    onClose();\n  }, [onClose]);\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"cloud-notes-overlay\" onClick={handleClose}>\n      <div className=\"cloud-notes-modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"cloud-notes-header\">\n          <h3>‚òÅÔ∏è Cloud Notes</h3>\n          {status && <span className=\"cloud-notes-status\">{status}</span>}\n          <button className=\"cloud-notes-close\" onClick={handleClose}>√ó</button>\n        </div>\n\n        {!isUnlocked ? (\n          <div className=\"cloud-notes-unlock\">\n            <input\n              type=\"password\"\n              placeholder=\"Enter access code\"\n              value={accessCode}\n              onChange={(e) => setAccessCode(e.target.value)}\n              onKeyDown={(e) => e.key === 'Enter' && handleUnlock()}\n              disabled={loading}\n            />\n            <button onClick={handleUnlock} disabled={loading}>\n              {loading ? '...' : 'üîì Unlock'}\n            </button>\n          </div>\n        ) : (\n          <>\n            <textarea\n              className=\"cloud-notes-textarea\"\n              value={content}\n              onChange={(e) => setContent(e.target.value)}\n              placeholder=\"Write notes here...\"\n            />\n\n            <div className=\"cloud-notes-footer\">\n              <button\n                className=\"cloud-notes-save\"\n                onClick={saveNotes}\n                disabled={saving}\n              >\n                Save\n              </button>\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default CloudNotes;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}