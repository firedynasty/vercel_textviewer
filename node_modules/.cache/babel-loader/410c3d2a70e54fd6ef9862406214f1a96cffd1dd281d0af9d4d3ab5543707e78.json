{"ast":null,"code":"var _jsxFileName = \"/Users/stanleytan/Documents/25-technical/01-github/vercel_textviewer/src/TextViewer.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport Sidebar from './components/Sidebar';\nimport ContentViewer from './components/ContentViewer';\nimport ControlBar from './components/ControlBar';\nimport { processFiles, rtfToPlainText, isRtfFile } from './utils/fileUtils';\nimport { useTTS } from './hooks/useTTS';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction TextViewer() {\n  _s();\n  const [files, setFiles] = useState([]);\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [fontSize, setFontSize] = useState(18);\n  const [darkMode, setDarkMode] = useState(false);\n  const [isEditing, setIsEditing] = useState(false);\n  const tts = useTTS();\n  const [editContent, setEditContent] = useState('');\n  const [imagePathToBlobUrl, setImagePathToBlobUrl] = useState({});\n  const currentFile = files[currentIndex] || null;\n  const handleFilesLoaded = useCallback(fileList => {\n    const result = processFiles(fileList);\n    if (result.error) {\n      alert(result.error);\n      return;\n    }\n    setFiles(result.files);\n    setImagePathToBlobUrl(result.imagePathToBlobUrl || {});\n    setCurrentIndex(0);\n    setIsEditing(false);\n    setEditContent('');\n  }, []);\n  const handleFileSelect = useCallback(index => {\n    if (isEditing) {\n      if (!window.confirm('You have unsaved changes. Discard them?')) {\n        return;\n      }\n    }\n    setCurrentIndex(index);\n    setIsEditing(false);\n    setEditContent('');\n  }, [isEditing]);\n  const handlePrev = useCallback(() => {\n    if (files.length === 0) return;\n    if (isEditing) {\n      if (!window.confirm('You have unsaved changes. Discard them?')) {\n        return;\n      }\n      setIsEditing(false);\n    }\n    setCurrentIndex(prev => prev > 0 ? prev - 1 : files.length - 1);\n  }, [files.length, isEditing]);\n  const handleNext = useCallback(() => {\n    if (files.length === 0) return;\n    if (isEditing) {\n      if (!window.confirm('You have unsaved changes. Discard them?')) {\n        return;\n      }\n      setIsEditing(false);\n    }\n    setCurrentIndex(prev => prev < files.length - 1 ? prev + 1 : 0);\n  }, [files.length, isEditing]);\n  const handleFontSizeChange = useCallback(delta => {\n    setFontSize(prev => Math.max(10, Math.min(40, prev + delta)));\n  }, []);\n  const handleDarkModeToggle = useCallback(() => {\n    setDarkMode(prev => !prev);\n  }, []);\n  const handleEdit = useCallback(() => {\n    if (!currentFile || currentFile.type !== 'text' && currentFile.type !== 'markdown') return;\n\n    // Fetch current content\n    fetch(currentFile.url).then(res => res.text()).then(text => {\n      setEditContent(text);\n      setIsEditing(true);\n    }).catch(err => {\n      console.error('Error loading file for edit:', err);\n      alert('Error loading file for editing');\n    });\n  }, [currentFile]);\n  const handleSave = useCallback(() => {\n    if (!currentFile || !isEditing) return;\n\n    // Create a new blob with the edited content\n    const blob = new Blob([editContent], {\n      type: 'text/plain'\n    });\n    const newUrl = URL.createObjectURL(blob);\n\n    // Update the file in the array\n    setFiles(prevFiles => {\n      const newFiles = [...prevFiles];\n      newFiles[currentIndex] = {\n        ...newFiles[currentIndex],\n        url: newUrl\n      };\n      return newFiles;\n    });\n\n    // Download the file\n    const a = document.createElement('a');\n    a.href = newUrl;\n    a.download = currentFile.originalName || `${currentFile.key}.txt`;\n    a.click();\n    setIsEditing(false);\n    setEditContent('');\n  }, [currentFile, currentIndex, editContent, isEditing]);\n  const handleCancel = useCallback(() => {\n    setIsEditing(false);\n    setEditContent('');\n  }, []);\n\n  // Load text content for TTS when file changes\n  useEffect(() => {\n    if (currentFile && (currentFile.type === 'text' || currentFile.type === 'rtf' || currentFile.type === 'markdown')) {\n      fetch(currentFile.url).then(res => res.text()).then(text => {\n        // Convert RTF to plain text if needed\n        if (currentFile.originalName && isRtfFile(currentFile.originalName)) {\n          text = rtfToPlainText(text);\n        }\n        tts.loadText(text);\n      }).catch(err => {\n        console.error('Error loading file for TTS:', err);\n      });\n    } else {\n      tts.loadText('');\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentFile]);\n\n  // Keyboard navigation\n  useEffect(() => {\n    const handleKeyDown = e => {\n      // Don't handle keys when editing or in input fields\n      if (isEditing) return;\n      if (['INPUT', 'TEXTAREA', 'SELECT'].includes(e.target.tagName)) return;\n      if (e.key === 'ArrowLeft') {\n        handlePrev();\n      } else if (e.key === 'ArrowRight') {\n        handleNext();\n      } else if (e.key === '[') {\n        // TTS previous sentence\n        tts.prevSentence();\n      } else if (e.key === ']') {\n        // TTS next sentence\n        tts.nextSentence();\n      }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [handlePrev, handleNext, isEditing, tts]);\n\n  // Global drag and drop\n  useEffect(() => {\n    const handleDragOver = e => {\n      e.preventDefault();\n    };\n    const handleDrop = e => {\n      e.preventDefault();\n    };\n    window.addEventListener('dragover', handleDragOver);\n    window.addEventListener('drop', handleDrop);\n    return () => {\n      window.removeEventListener('dragover', handleDragOver);\n      window.removeEventListener('drop', handleDrop);\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `text-viewer ${darkMode ? 'dark-mode' : ''}`,\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {\n      files: files,\n      currentIndex: currentIndex,\n      onFileSelect: handleFileSelect\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-content\",\n      children: [/*#__PURE__*/_jsxDEV(ControlBar, {\n        currentFile: currentFile,\n        fontSize: fontSize,\n        onFontSizeChange: handleFontSizeChange,\n        darkMode: darkMode,\n        onDarkModeToggle: handleDarkModeToggle,\n        isEditing: isEditing,\n        onEdit: handleEdit,\n        onSave: handleSave,\n        onCancel: handleCancel,\n        onFilesLoaded: handleFilesLoaded,\n        tts: tts\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ContentViewer, {\n        file: currentFile,\n        fontSize: fontSize,\n        isEditing: isEditing,\n        editContent: editContent,\n        onEditChange: setEditContent,\n        imagePathToBlobUrl: imagePathToBlobUrl,\n        onPrev: handlePrev,\n        onNext: handleNext,\n        onPlayFromSelection: tts.playFromSelection\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 190,\n    columnNumber: 5\n  }, this);\n}\n_s(TextViewer, \"KGcY/4IsvRkIIj8K0qwHX27TlpE=\", false, function () {\n  return [useTTS];\n});\n_c = TextViewer;\nexport default TextViewer;\nvar _c;\n$RefreshReg$(_c, \"TextViewer\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","Sidebar","ContentViewer","ControlBar","processFiles","rtfToPlainText","isRtfFile","useTTS","jsxDEV","_jsxDEV","TextViewer","_s","files","setFiles","currentIndex","setCurrentIndex","fontSize","setFontSize","darkMode","setDarkMode","isEditing","setIsEditing","tts","editContent","setEditContent","imagePathToBlobUrl","setImagePathToBlobUrl","currentFile","handleFilesLoaded","fileList","result","error","alert","handleFileSelect","index","window","confirm","handlePrev","length","prev","handleNext","handleFontSizeChange","delta","Math","max","min","handleDarkModeToggle","handleEdit","type","fetch","url","then","res","text","catch","err","console","handleSave","blob","Blob","newUrl","URL","createObjectURL","prevFiles","newFiles","a","document","createElement","href","download","originalName","key","click","handleCancel","loadText","handleKeyDown","e","includes","target","tagName","prevSentence","nextSentence","addEventListener","removeEventListener","handleDragOver","preventDefault","handleDrop","className","children","onFileSelect","fileName","_jsxFileName","lineNumber","columnNumber","onFontSizeChange","onDarkModeToggle","onEdit","onSave","onCancel","onFilesLoaded","file","onEditChange","onPrev","onNext","onPlayFromSelection","playFromSelection","_c","$RefreshReg$"],"sources":["/Users/stanleytan/Documents/25-technical/01-github/vercel_textviewer/src/TextViewer.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport Sidebar from './components/Sidebar';\nimport ContentViewer from './components/ContentViewer';\nimport ControlBar from './components/ControlBar';\nimport { processFiles, rtfToPlainText, isRtfFile } from './utils/fileUtils';\nimport { useTTS } from './hooks/useTTS';\n\nfunction TextViewer() {\n  const [files, setFiles] = useState([]);\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [fontSize, setFontSize] = useState(18);\n  const [darkMode, setDarkMode] = useState(false);\n  const [isEditing, setIsEditing] = useState(false);\n\n  const tts = useTTS();\n  const [editContent, setEditContent] = useState('');\n  const [imagePathToBlobUrl, setImagePathToBlobUrl] = useState({});\n\n  const currentFile = files[currentIndex] || null;\n\n  const handleFilesLoaded = useCallback((fileList) => {\n    const result = processFiles(fileList);\n\n    if (result.error) {\n      alert(result.error);\n      return;\n    }\n\n    setFiles(result.files);\n    setImagePathToBlobUrl(result.imagePathToBlobUrl || {});\n    setCurrentIndex(0);\n    setIsEditing(false);\n    setEditContent('');\n  }, []);\n\n  const handleFileSelect = useCallback((index) => {\n    if (isEditing) {\n      if (!window.confirm('You have unsaved changes. Discard them?')) {\n        return;\n      }\n    }\n    setCurrentIndex(index);\n    setIsEditing(false);\n    setEditContent('');\n  }, [isEditing]);\n\n  const handlePrev = useCallback(() => {\n    if (files.length === 0) return;\n    if (isEditing) {\n      if (!window.confirm('You have unsaved changes. Discard them?')) {\n        return;\n      }\n      setIsEditing(false);\n    }\n    setCurrentIndex((prev) => (prev > 0 ? prev - 1 : files.length - 1));\n  }, [files.length, isEditing]);\n\n  const handleNext = useCallback(() => {\n    if (files.length === 0) return;\n    if (isEditing) {\n      if (!window.confirm('You have unsaved changes. Discard them?')) {\n        return;\n      }\n      setIsEditing(false);\n    }\n    setCurrentIndex((prev) => (prev < files.length - 1 ? prev + 1 : 0));\n  }, [files.length, isEditing]);\n\n  const handleFontSizeChange = useCallback((delta) => {\n    setFontSize((prev) => Math.max(10, Math.min(40, prev + delta)));\n  }, []);\n\n  const handleDarkModeToggle = useCallback(() => {\n    setDarkMode((prev) => !prev);\n  }, []);\n\n  const handleEdit = useCallback(() => {\n    if (!currentFile || (currentFile.type !== 'text' && currentFile.type !== 'markdown')) return;\n\n    // Fetch current content\n    fetch(currentFile.url)\n      .then(res => res.text())\n      .then(text => {\n        setEditContent(text);\n        setIsEditing(true);\n      })\n      .catch(err => {\n        console.error('Error loading file for edit:', err);\n        alert('Error loading file for editing');\n      });\n  }, [currentFile]);\n\n  const handleSave = useCallback(() => {\n    if (!currentFile || !isEditing) return;\n\n    // Create a new blob with the edited content\n    const blob = new Blob([editContent], { type: 'text/plain' });\n    const newUrl = URL.createObjectURL(blob);\n\n    // Update the file in the array\n    setFiles(prevFiles => {\n      const newFiles = [...prevFiles];\n      newFiles[currentIndex] = {\n        ...newFiles[currentIndex],\n        url: newUrl\n      };\n      return newFiles;\n    });\n\n    // Download the file\n    const a = document.createElement('a');\n    a.href = newUrl;\n    a.download = currentFile.originalName || `${currentFile.key}.txt`;\n    a.click();\n\n    setIsEditing(false);\n    setEditContent('');\n  }, [currentFile, currentIndex, editContent, isEditing]);\n\n  const handleCancel = useCallback(() => {\n    setIsEditing(false);\n    setEditContent('');\n  }, []);\n\n  // Load text content for TTS when file changes\n  useEffect(() => {\n    if (currentFile && (currentFile.type === 'text' || currentFile.type === 'rtf' || currentFile.type === 'markdown')) {\n      fetch(currentFile.url)\n        .then(res => res.text())\n        .then(text => {\n          // Convert RTF to plain text if needed\n          if (currentFile.originalName && isRtfFile(currentFile.originalName)) {\n            text = rtfToPlainText(text);\n          }\n          tts.loadText(text);\n        })\n        .catch(err => {\n          console.error('Error loading file for TTS:', err);\n        });\n    } else {\n      tts.loadText('');\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentFile]);\n\n  // Keyboard navigation\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      // Don't handle keys when editing or in input fields\n      if (isEditing) return;\n      if (['INPUT', 'TEXTAREA', 'SELECT'].includes(e.target.tagName)) return;\n\n      if (e.key === 'ArrowLeft') {\n        handlePrev();\n      } else if (e.key === 'ArrowRight') {\n        handleNext();\n      } else if (e.key === '[') {\n        // TTS previous sentence\n        tts.prevSentence();\n      } else if (e.key === ']') {\n        // TTS next sentence\n        tts.nextSentence();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [handlePrev, handleNext, isEditing, tts]);\n\n  // Global drag and drop\n  useEffect(() => {\n    const handleDragOver = (e) => {\n      e.preventDefault();\n    };\n\n    const handleDrop = (e) => {\n      e.preventDefault();\n    };\n\n    window.addEventListener('dragover', handleDragOver);\n    window.addEventListener('drop', handleDrop);\n\n    return () => {\n      window.removeEventListener('dragover', handleDragOver);\n      window.removeEventListener('drop', handleDrop);\n    };\n  }, []);\n\n  return (\n    <div className={`text-viewer ${darkMode ? 'dark-mode' : ''}`}>\n      <Sidebar\n        files={files}\n        currentIndex={currentIndex}\n        onFileSelect={handleFileSelect}\n      />\n\n      <div className=\"main-content\">\n        <ControlBar\n          currentFile={currentFile}\n          fontSize={fontSize}\n          onFontSizeChange={handleFontSizeChange}\n          darkMode={darkMode}\n          onDarkModeToggle={handleDarkModeToggle}\n          isEditing={isEditing}\n          onEdit={handleEdit}\n          onSave={handleSave}\n          onCancel={handleCancel}\n          onFilesLoaded={handleFilesLoaded}\n          tts={tts}\n        />\n\n        <ContentViewer\n          file={currentFile}\n          fontSize={fontSize}\n          isEditing={isEditing}\n          editContent={editContent}\n          onEditChange={setEditContent}\n          imagePathToBlobUrl={imagePathToBlobUrl}\n          onPrev={handlePrev}\n          onNext={handleNext}\n          onPlayFromSelection={tts.playFromSelection}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default TextViewer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}