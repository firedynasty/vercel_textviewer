{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NOTES_FILENAME='notes.txt';function CloudNotes(_ref){let{isOpen,onClose}=_ref;const[content,setContent]=useState('');const[loading,setLoading]=useState(false);const[saving,setSaving]=useState(false);const[status,setStatus]=useState('');// Load notes from API\nconst loadNotes=useCallback(async()=>{setLoading(true);setStatus('Loading...');try{const response=await fetch('/api/files');console.log('Load response status:',response.status);if(response.ok){var _data$files;const data=await response.json();console.log('Loaded data:',data);setContent(((_data$files=data.files)===null||_data$files===void 0?void 0:_data$files[NOTES_FILENAME])||'');setStatus('');}else{const errorText=await response.text();console.error('Load error:',response.status,errorText);setStatus(\"Load failed: \".concat(response.status));}}catch(err){console.error('Load exception:',err);setStatus('Failed to load: '+err.message);}finally{setLoading(false);}},[]);// Save notes to API\nconst saveNotes=async()=>{setSaving(true);setStatus('Saving...');try{const response=await fetch('/api/files',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({filename:NOTES_FILENAME,content:content})});if(response.ok){setStatus('Saved ✓');}else{setStatus('Save failed');}}catch(err){setStatus('Save failed');}finally{setSaving(false);}};// Load notes when modal opens\nuseEffect(()=>{if(isOpen){loadNotes();setStatus('');}},[isOpen,loadNotes]);if(!isOpen)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"cloud-notes-overlay\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"cloud-notes-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cloud-notes-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u2601\\uFE0F Cloud Notes\"}),status&&/*#__PURE__*/_jsx(\"span\",{className:\"cloud-notes-status\",children:status}),/*#__PURE__*/_jsx(\"button\",{className:\"cloud-notes-close\",onClick:onClose,children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"textarea\",{className:\"cloud-notes-textarea\",value:content,onChange:e=>setContent(e.target.value),placeholder:\"Write notes here...\",disabled:loading}),/*#__PURE__*/_jsx(\"div\",{className:\"cloud-notes-footer\",children:/*#__PURE__*/_jsx(\"button\",{className:\"cloud-notes-save\",onClick:saveNotes,disabled:saving,children:\"Save\"})})]})});}export default CloudNotes;","map":{"version":3,"names":["React","useState","useEffect","useCallback","jsx","_jsx","jsxs","_jsxs","NOTES_FILENAME","CloudNotes","_ref","isOpen","onClose","content","setContent","loading","setLoading","saving","setSaving","status","setStatus","loadNotes","response","fetch","console","log","ok","_data$files","data","json","files","errorText","text","error","concat","err","message","saveNotes","method","headers","body","JSON","stringify","filename","className","onClick","children","e","stopPropagation","value","onChange","target","placeholder","disabled"],"sources":["/Users/stanleytan/Documents/25-technical/01-github/vercel_textviewer/src/components/CloudNotes.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\n\nconst NOTES_FILENAME = 'notes.txt';\n\nfunction CloudNotes({ isOpen, onClose }) {\n  const [content, setContent] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [status, setStatus] = useState('');\n\n  // Load notes from API\n  const loadNotes = useCallback(async () => {\n    setLoading(true);\n    setStatus('Loading...');\n    try {\n      const response = await fetch('/api/files');\n      console.log('Load response status:', response.status);\n      if (response.ok) {\n        const data = await response.json();\n        console.log('Loaded data:', data);\n        setContent(data.files?.[NOTES_FILENAME] || '');\n        setStatus('');\n      } else {\n        const errorText = await response.text();\n        console.error('Load error:', response.status, errorText);\n        setStatus(`Load failed: ${response.status}`);\n      }\n    } catch (err) {\n      console.error('Load exception:', err);\n      setStatus('Failed to load: ' + err.message);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Save notes to API\n  const saveNotes = async () => {\n    setSaving(true);\n    setStatus('Saving...');\n\n    try {\n      const response = await fetch('/api/files', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          filename: NOTES_FILENAME,\n          content: content\n        })\n      });\n\n      if (response.ok) {\n        setStatus('Saved ✓');\n      } else {\n        setStatus('Save failed');\n      }\n    } catch (err) {\n      setStatus('Save failed');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // Load notes when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      loadNotes();\n      setStatus('');\n    }\n  }, [isOpen, loadNotes]);\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"cloud-notes-overlay\" onClick={onClose}>\n      <div className=\"cloud-notes-modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"cloud-notes-header\">\n          <h3>☁️ Cloud Notes</h3>\n          {status && <span className=\"cloud-notes-status\">{status}</span>}\n          <button className=\"cloud-notes-close\" onClick={onClose}>×</button>\n        </div>\n\n        <textarea\n          className=\"cloud-notes-textarea\"\n          value={content}\n          onChange={(e) => setContent(e.target.value)}\n          placeholder=\"Write notes here...\"\n          disabled={loading}\n        />\n\n        <div className=\"cloud-notes-footer\">\n          <button\n            className=\"cloud-notes-save\"\n            onClick={saveNotes}\n            disabled={saving}\n          >\n            Save\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default CloudNotes;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}